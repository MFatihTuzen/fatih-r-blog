{
  "hash": "79e5799ed7ed10770d8a131cf11f8024",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Outliers in Data Analysis: Detecting Extreme Values Before Modeling in R with İstanbul Airbnb Data\"\nauthor: \"M. Fatih Tüzen\"\ndate: \"2025-12-19\"\ncategories: [R, Statistics, Data Analysis, Data Science, Data Preprocessing, Outliers, Inter Quartile Range, Z-Score, Data Cleaning]\nformat:\n  html:\n    toc: true\n    toc-depth: 2\n    number-sections: true\n    code-tools: true\n    code-overflow: scroll\n    code-block-background: true\n  pdf:\n    toc: true\nexecute:\n  echo: true\n  warning: false\n  message: false\n---\n\n![](outliers.png){fig-align=\"center\" width=\"484\"}\n\n## Introduction\n\nData preprocessing is often presented as a sequence of technical steps. However, each preprocessing decision implicitly embeds a statistical assumption.\n\nIn a previous article, I discussed how missing observations can bias analysis if they are ignored or handled improperly:\n\n[**Handling Missing Data in R: A Comprehensive Guide**](https://medium.com/r-evolution/handling-missing-data-in-r-a-comprehensive-guide-eca195eaead3)\n\nThis article continues that discussion by focusing on **outliers**. Unlike missing values, outliers are observed data points. The challenge is not their absence, but their *extremeness*.\n\nUnderstanding whether an extreme value is informative or misleading is a crucial step before any modeling effort.\n\n## Why Outliers Matter\n\nOutliers can affect statistical analysis in several fundamental ways:\n\n-   They distort summary statistics such as the mean and standard deviation\n-   They can dominate parameter estimates in regression models\n-   They influence distance-based methods such as clustering\n\nMore importantly, outliers force analysts to confront a key question:\n\n> Are we observing rare but valid behavior, or a deviation from the assumed data-generating process?\n\n## What Is an Outlier?\n\nInformally, an outlier is an observation that appears unusually large or small relative to the rest of the data. Formally, an outlier is an observation that is inconsistent with the bulk of the data **under a given statistical model**. Outliers are therefore not absolute objects. They depend on assumptions about distribution, scale, and structure.\n\n## The Dataset: Inside Airbnb Listings (Istanbul)\n\nTo demonstrate outlier detection methods, we will use **Inside Airbnb** listings data. Inside Airbnb is a mission-driven project that publishes datasets scraped from publicly available Airbnb listing pages and provides city-level downloads for research and analysis.\n\nIn this article, we will work with the **detailed listings** file:\n\n-   `listings.csv.gz` (detailed listing-level data; typically rich and feature-complete)\n\nYou can download the dataset from the [Inside Airbnb](https://insideairbnb.com/get-the-data/) “Get the Data” page (choose a city and download *Detailed Listings data*).\n\n### Why this dataset is ideal for outlier detection\n\nUnlike many “clean” educational datasets, Airbnb listing data often contains **genuinely extreme values**, especially in `price`. These extremes are not necessarily errors—luxury properties exist—but they can heavily distort means, variances, and model estimates. That makes Airbnb listings a realistic and highly instructive dataset for outlier detection.\n\n### Variables we will use\n\nAlthough the Airbnb listings dataset contains many variables, this article focuses on a **small, purpose-driven subset**.\n\nOur primary variable of interest is:\n\n-   `price` (converted to `price_num`): nightly listing price.\\\n    This variable is typically right-skewed and often contains extreme values, making it ideal for illustrating outlier detection methods.\n\nTo provide context for interpreting extreme prices, we also retain a limited number of supporting variables:\n\n-   `minimum_nights`: minimum stay requirement, which can occasionally take unusually large values\n-   `number_of_reviews`: a proxy for listing activity and popularity, often zero-inflated\n-   `room_type`: categorical variable indicating the type of accommodation\n-   `neighbourhood_cleansed`: cleaned neighborhood label, useful for geographic context\n\nThese additional variables are not used to *detect* outliers directly, but to **interpret and explain** them once identified.\n\n### Loading the data in R\n\nBelow is an example using **Istanbul**. If you prefer a different city, replace the URL with the corresponding `listings.csv.gz` link from Inside Airbnb.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(readr)\nlibrary(stringr)\n\n# Example URL (Istanbul). You can get the latest link from Inside Airbnb \"Get the Data\".\n# The URL structure typically follows:\n# https://data.insideairbnb.com/turkey/marmara/istanbul/2025-09-29/data/listings.csv.gz\n\nlistings_raw <- read_csv(\n  \"listings.csv.gz\",\n  show_col_types = FALSE\n)\n\nvars_keep <- c(\n  \"id\", \"name\",\n  \"price\", \"minimum_nights\", \"number_of_reviews\",\n  \"room_type\", \"neighbourhood_cleansed\"\n)\n\nlistings_small <- listings_raw %>%\n  select(any_of(vars_keep))\n```\n:::\n\n\n### Inspecting the selected variables\n\nBefore performing any transformation, it is important to inspect the data **as it comes from the source**. This allows us to understand variable types and identify potential issues early.\n\nBelow, we examine only the variables selected for this article.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(listings_small)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 30,051\nColumns: 7\n$ id                     <dbl> 1.342043e+18, 1.342082e+18, 1.342211e+18, 1.342~\n$ name                   <chr> \"Отдельная квартира на Фатих(Балат).\", \"Blue st~\n$ price                  <chr> \"$2,290.00\", \"$1,101.00\", \"$3,430.00\", \"$3,178.~\n$ minimum_nights         <dbl> 5, 7, 2, 100, 1, 100, 1, 5, 2, 100, 100, 2, 100~\n$ number_of_reviews      <dbl> 4, 4, 26, 1, 2, 0, 41, 0, 19, 0, 0, 26, 0, 0, 1~\n$ room_type              <chr> \"Entire home/apt\", \"Private room\", \"Entire home~\n$ neighbourhood_cleansed <chr> \"Fatih\", \"Beyoglu\", \"Beyoglu\", \"Sisli\", \"Sisli\"~\n```\n\n\n:::\n:::\n\n\nAt this stage, notice in particular the `price` variable. Although it represents a numerical concept (nightly price), it is not stored as a numeric variable.\n\nInstead, `price` is typically read as a character string, often containing currency symbols and separators. This is common in datasets that originate from web scraping or user-facing platforms.\n\n### Why we need to convert `price` to numeric\n\nOutlier detection methods such as boxplots, the IQR rule, and Z-scores require **numeric input**. As long as `price` is stored as a character variable, it cannot be used in quantitative analysis.\n\nMore importantly, treating `price` as numeric is not just a technical requirement. It reflects a modeling decision: we explicitly state that this variable represents a measurable quantity on which arithmetic operations are meaningful.\n\n### Converting `price` to a numeric variable\n\nTo prepare the data for analysis, we remove non-numeric characters and convert `price` to a numeric variable, which we call `price_num`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlistings_small <- listings_small %>%\n  mutate(price_num = price %>%\n           str_replace_all(\"[^0-9.]\", \"\") %>%\n           as.numeric())\n```\n:::\n\n\nAfter the conversion, we can verify the result by inspecting basic summaries:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(listings_small$price_num)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's \n     80    1644    2538    5084    4108 4437598    4803 \n```\n\n\n:::\n:::\n\n\nAt this point, `price_num` is ready for outlier detection and visualization. In the next section, we will use this variable to illustrate how extreme values can be identified using visual tools and formal statistical rules.\n\n## Visualizing Price Distributions and Potential Outliers\n\nBefore applying any formal outlier detection rule, it is good practice to explore the distribution of the variable visually. Visualization helps us understand the *shape*, *spread*, and *asymmetry* of the data, and often reveals extreme values immediately.\n\nIn this section, we focus on the numeric price variable `price_num`.\n\n### A first attempt: why the raw histogram fails\n\nA natural first step is to plot a histogram of nightly prices on the original scale.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(scales)\n\nggplot(listings_small, aes(x = price_num)) +\n  geom_histogram(bins = 40, fill = \"#B0B0B0\", color = \"white\") +\n  scale_x_continuous(labels = label_number(big.mark = \",\")) +\n  labs(\n    title = \"Distribution of Nightly Prices (raw scale)\",\n    x = \"Nightly price\",\n    y = \"Count\"\n  ) +\n  theme_minimal(base_size = 13)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-pdf/unnamed-chunk-5-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n**Interpretation**\n\nThis plot is technically correct, but analytically unhelpful.\n\n-   A small number of extremely expensive listings stretches the x-axis.\n\n-   The majority of observations are compressed near zero.\n\n-   As a result, the internal structure of the data becomes almost invisible.\n\nThis is not a plotting mistake. It is a direct consequence of **heavy right-skewness**, which is common in price data. At this point, it is already clear that naive visualizations on the raw scale are insufficient.\n\n### Adding context: prices depend on `room_type`\n\nAirbnb listings are not drawn from a single homogeneous market. A *shared room* and an *entire home/apt* represent fundamentally different accommodation types, and their prices should not be expected to follow the same distribution.\n\nIf we ignore this context and search for outliers globally, we risk labeling valid group-level differences as anomalies. For this reason, we first examine how prices behave **within each room type**.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlistings_small %>%\n  count(room_type, sort = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 x 2\n  room_type           n\n  <chr>           <int>\n1 Entire home/apt 20243\n2 Private room     9494\n3 Hotel room        157\n4 Shared room       157\n```\n\n\n:::\n:::\n\n\n### Price distributions by room type (log scale)\n\nTo make the right tail interpretable without discarding extreme values, we visualize prices on a logarithmic scale and separate distributions by room type.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(listings_small, aes(x = price_num)) +\ngeom_histogram(bins = 35, fill = \"#4C72B0\", color = \"white\", alpha = 0.9) +\nscale_x_log10(\nbreaks = log_breaks(n = 6),\nlabels = label_number(big.mark = \",\")\n) +\nfacet_wrap(~ room_type, scales = \"free_y\") +\nlabs(\ntitle = \"Nightly Price Distributions by Room Type (log scale)\",\nsubtitle = \"Log scale improves readability in heavily right-skewed price data\",\nx = \"Nightly price (log scale)\",\ny = \"Count\"\n) +\ntheme_minimal(base_size = 13)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-pdf/unnamed-chunk-7-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n**Interpretation**\n\nThis visualization reveals several important patterns:\n\n-   Each room type has its own characteristic price range.\n\n-   The extreme right tail becomes visible without overwhelming the plot.\n\n-   What appears as an “outlier” globally may be perfectly typical within a given room type\n\nAt this stage, the notion of an outlier becomes **context-dependent** rather than absolute.\n\n### Boxplots by room type: highlighting potential extremes\n\nHistograms show overall shape, but boxplots are better suited for highlighting extreme observations. We again use a log scale to preserve readability.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(listings_small, aes(x = room_type, y = price_num)) +\n  geom_boxplot(outlier.alpha = 0.35, fill = \"#DDDDDD\") +\n  scale_y_log10(labels = label_number(big.mark = \",\")) +\n  labs(\n    title = \"Nightly Prices by Room Type (boxplot, log scale)\",\n    subtitle = \"Potential outliers are assessed within each room type\",\n    x = \"Room type\",\n    y = \"Nightly price (log scale)\"\n  ) +\n  theme_minimal(base_size = 13) +\n  theme(axis.text.x = element_text(angle = 20, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-pdf/unnamed-chunk-8-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n**Interpretation**\n\nThis plot makes a key point explicit:\n\n-   Outliers are flagged **relative to their own room type**, not the entire dataset.\n\n-   Extremely high prices within *shared rooms* are **statistically more unusual** than similarly high prices within *entire homes*, given the much narrower price distribution of shared rooms.\n\n-   Statistical outliers are candidates for further investigation, not automatic deletions.\n\n### What visual exploration tells us\n\nFrom visual inspection alone, we can conclude that:\n\n-   Airbnb price data are highly right-skewed.\n\n-   Extreme values exist and strongly influence scale and summaries.\n\n-   Context (here, `room_type`) is essential for meaningful interpretation.\n\nThese observations motivate the next step: formalizing outlier detection using statistical rules such as the **IQR method** and **Z-scores**, applied *within room types* rather than globally.\n\n## Formal Outlier Detection Within Room Type\n\nVisual exploration suggested that nightly prices exhibit strong right-skewness and that extreme values should be interpreted within the context of `room_type`. In this section, we formalize that intuition using statistical outlier detection rules.\n\nOur goal is not to mechanically remove observations, but to **identify and examine** listings whose prices are unusually high relative to their own room type.\n\n### The IQR rule\n\nThe Interquartile Range (IQR) rule defines outliers based on the spread of the middle 50% of the data. For a given variable, the IQR is defined as:\n\n$$\n\\text{IQR} = Q_3 - Q_1\n$$\n\nAn observation is flagged as a potential outlier if it lies outside the interval:\n\n$$\n[ Q_1 - 1.5 \\times \\text{IQR}, \\; Q_3 + 1.5 \\times \\text{IQR} ]\n$$\n\nBecause the IQR relies on quantiles rather than the mean and standard deviation, it is relatively robust to skewed distributions—an important property for price data.\n\n### Applying the IQR rule within each room type\n\nInstead of computing a single global IQR, we apply the rule **separately within each room type**. This ensures that prices are evaluated relative to comparable listings.\n\n\n::: {.cell}\n\n```{.r .cell-code}\noutliers_iqr <- listings_small %>%\n  group_by(room_type) %>%\n  mutate(\n    Q1 = quantile(price_num, 0.25, na.rm = TRUE),\n    Q3 = quantile(price_num, 0.75, na.rm = TRUE),\n    IQR_value = Q3 - Q1,\n    lower_bound = Q1 - 1.5 * IQR_value,\n    upper_bound = Q3 + 1.5 * IQR_value,\n    outlier_iqr = price_num < lower_bound | price_num > upper_bound\n  ) %>%\n  ungroup()\n```\n:::\n\n\nAt this stage, each listing is labeled according to whether its price is considered an outlier *within its own room type*.\n\n### How many outliers do we detect?\n\nBefore inspecting individual listings, it is informative to summarize how many outliers are flagged in each group.\n\n\n::: {.cell}\n\n```{.r .cell-code}\noutliers_iqr %>%\n  count(room_type, outlier_iqr) %>%\n  arrange(room_type, desc(outlier_iqr))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 12 x 3\n   room_type       outlier_iqr     n\n   <chr>           <lgl>       <int>\n 1 Entire home/apt TRUE         1458\n 2 Entire home/apt FALSE       16616\n 3 Entire home/apt NA           2169\n 4 Hotel room      TRUE           17\n 5 Hotel room      FALSE         106\n 6 Hotel room      NA             34\n 7 Private room    TRUE          441\n 8 Private room    FALSE        6470\n 9 Private room    NA           2583\n10 Shared room     TRUE            3\n11 Shared room     FALSE         137\n12 Shared room     NA             17\n```\n\n\n:::\n:::\n\n\n**Interpretation**\n\nThis table shows that outliers are not evenly distributed across room types. Some categories naturally exhibit greater price dispersion, which leads to more listings being flagged as potential outliers. This reinforces the importance of **group-aware detection**.\n\n### Inspecting extreme cases flagged by IQR\n\nStatistical flags become meaningful only when we inspect the actual observations. Below, we list the most expensive listings flagged as outliers within each room type.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntop_price_outliers <- outliers_iqr %>%\n  filter(outlier_iqr) %>%\n  group_by(room_type) %>%\n  arrange(desc(price_num)) %>%\n  slice_head(n = 5) %>%\n  ungroup() %>%\n  select(\n    room_type,\n    price,\n    price_num,\n    minimum_nights,\n    number_of_reviews,\n    neighbourhood_cleansed,\n    name\n  )\n\ntop_price_outliers\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 18 x 7\n   room_type       price         price_num minimum_nights number_of_reviews\n   <chr>           <chr>             <dbl>          <dbl>             <dbl>\n 1 Entire home/apt $4,437,598.00   4437598            100                14\n 2 Entire home/apt $2,658,600.00   2658600            100                 3\n 3 Entire home/apt $2,109,690.00   2109690            100                 0\n 4 Entire home/apt $2,000,000.00   2000000            100                 0\n 5 Entire home/apt $1,250,008.00   1250008            100                 0\n 6 Hotel room      $2,439,497.00   2439497              1                 0\n 7 Hotel room      $2,439,497.00   2439497              1                 0\n 8 Hotel room      $2,439,497.00   2439497              1                 0\n 9 Hotel room      $2,439,497.00   2439497              1                 0\n10 Hotel room      $2,433,427.00   2433427              1                 0\n11 Private room    $390,271.00      390271            365                 1\n12 Private room    $390,271.00      390271            365                 0\n13 Private room    $390,271.00      390271            365                 0\n14 Private room    $390,271.00      390271            100                 0\n15 Private room    $390,271.00      390271            100                 0\n16 Shared room     $7,221.00          7221              1                 0\n17 Shared room     $6,086.00          6086              1                 2\n18 Shared room     $5,841.00          5841            100                 0\n# i 2 more variables: neighbourhood_cleansed <chr>, name <chr>\n```\n\n\n:::\n:::\n\n\n**Interpretation**\n\nAt this point, the analysis moves from abstract rules to concrete questions:\n\n-   Are these listings luxury properties?\n\n-   Do they require unusually long minimum stays?\n\n-   Do they have very few (or no) reviews, suggesting new or inactive listings?\n\n-   Are they located in specific neighborhoods?\n\nThe answers to these questions determine whether a flagged observation should be:\n\n-   kept and modeled explicitly,\n\n-   transformed (e.g., via log scaling),\n\n-   or excluded due to data quality concerns.\n\n### Z-score–based outlier detection: concept and limitations\n\nIn addition to IQR-based rules, outliers are often discussed using **Z-scores**. Because this method is widely taught and frequently applied, it is important to understand both how it works and when it can be misleading.\n\n#### What is a Z-score?\n\nA Z-score measures how far an observation lies from the mean, expressed in units of standard deviation. For a single observation, the Z-score is defined as:\n\n$$\nz = \\frac{x - \\mu}{\\sigma}\n$$\n\nwhere:\n\n-   $\\mu$ is the sample mean\n-   $\\sigma$ is the sample standard deviation\n\nIntuitively, the Z-score answers the question:\n\n> “How many standard deviations away from the mean is this observation?”\n\nA common heuristic labels observations with\n\n$$\n|z| > 3\n$$\n\nas potential outliers.\n\n#### What does the Z-score assume?\n\nZ-score–based detection implicitly relies on several assumptions:\n\n-   the distribution is approximately symmetric,\n-   the mean and standard deviation are meaningful summaries,\n-   extreme values do not dominate the estimation of $\\mu$ and $\\sigma$.\n\nThese assumptions are often reasonable for approximately normal data, but they are problematic for strongly skewed distributions.\n\n#### Why Z-scores are problematic for price data\n\nAirbnb prices are typically **right-skewed** with long upper tails. In such cases:\n\n-   extreme values inflate the mean,\n-   extreme values inflate the standard deviation,\n-   as a result, truly extreme observations may receive *moderate* Z-scores.\n\nThis leads to a paradox: the very observations we want to detect reduce their own apparent extremeness. For this reason, Z-scores tend to **under-detect** outliers in heavily skewed economic data.\n\n#### Applying Z-scores within each room type\n\nDespite these limitations, Z-scores can still be informative when used carefully and comparatively. As with the IQR rule, we compute Z-scores **within each room type** to preserve contextual meaning.\n\n\n::: {.cell}\n\n```{.r .cell-code}\noutliers_z <- listings_small %>%\n  group_by(room_type) %>%\n  mutate(\n    mean_price = mean(price_num, na.rm = TRUE),\n    sd_price   = sd(price_num, na.rm = TRUE),\n    z_price    = (price_num - mean_price) / sd_price,\n    outlier_z  = abs(z_price) > 3\n  ) %>%\n  ungroup()\n```\n:::\n\n\n#### How many outliers are flagged by the Z-score rule?\n\nAfter computing Z-scores within each room type, we can summarize how many listings are flagged as outliers.\n\n\n::: {.cell}\n\n```{.r .cell-code}\noutliers_z %>%\n  count(room_type, outlier_z) %>%\n  arrange(room_type, desc(outlier_z))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 12 x 3\n   room_type       outlier_z     n\n   <chr>           <lgl>     <int>\n 1 Entire home/apt TRUE         24\n 2 Entire home/apt FALSE     18050\n 3 Entire home/apt NA         2169\n 4 Hotel room      TRUE          5\n 5 Hotel room      FALSE       118\n 6 Hotel room      NA           34\n 7 Private room    TRUE         26\n 8 Private room    FALSE      6885\n 9 Private room    NA         2583\n10 Shared room     TRUE          1\n11 Shared room     FALSE       139\n12 Shared room     NA           17\n```\n\n\n:::\n:::\n\n\n**Interpretation**\n\nIn many Airbnb datasets, this table reveals a striking pattern:\n\n-   The number of Z-score–based outliers is **much smaller** than the number detected by the IQR rule.\n\n-   In some room types, no observations are flagged at all.\n\nThis is a direct consequence of right-skewness: extreme prices inflate both the mean and the standard deviation, making Z-scores appear less extreme than expected.\n\n#### Inspecting listings flagged by Z-scores\n\nTo understand what Z-scores actually flag as outliers, we inspect the most extreme listings according to their Z-score values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntop_z_outliers <- outliers_z %>%\n  filter(outlier_z) %>%\n  group_by(room_type) %>%\n  arrange(desc(abs(z_price))) %>%\n  slice_head(n = 5) %>%\n  ungroup() %>%\n  select(\n    room_type,\n    price,\n    price_num,\n    z_price,\n    minimum_nights,\n    number_of_reviews,\n    neighbourhood_cleansed,\n    name\n  )\n\ntop_z_outliers\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 16 x 8\n   room_type       price      price_num z_price minimum_nights number_of_reviews\n   <chr>           <chr>          <dbl>   <dbl>          <dbl>             <dbl>\n 1 Entire home/apt $4,437,59~   4437598   92.9             100                14\n 2 Entire home/apt $2,658,60~   2658600   55.6             100                 3\n 3 Entire home/apt $2,109,69~   2109690   44.1             100                 0\n 4 Entire home/apt $2,000,00~   2000000   41.8             100                 0\n 5 Entire home/apt $1,250,00~   1250008   26.1             100                 0\n 6 Hotel room      $2,439,49~   2439497    4.84              1                 0\n 7 Hotel room      $2,439,49~   2439497    4.84              1                 0\n 8 Hotel room      $2,439,49~   2439497    4.84              1                 0\n 9 Hotel room      $2,439,49~   2439497    4.84              1                 0\n10 Hotel room      $2,433,42~   2433427    4.83              1                 0\n11 Private room    $390,271.~    390271   31.3             365                 1\n12 Private room    $390,271.~    390271   31.3             365                 0\n13 Private room    $390,271.~    390271   31.3             365                 0\n14 Private room    $390,271.~    390271   31.3             100                 0\n15 Private room    $390,271.~    390271   31.3             100                 0\n16 Shared room     $7,221.00       7221    3.65              1                 0\n# i 2 more variables: neighbourhood_cleansed <chr>, name <chr>\n```\n\n\n:::\n:::\n\n\n**Interpretation**\n\nWhen compared to the IQR-based outliers, these listings are often:\n\n-   less extreme in absolute price,\n\n-   closer to the central mass of the distribution,\n\n-   dominated by a small number of room types.\n\nThis confirms that Z-score–based detection tends to **miss many extreme but valid prices** in heavily skewed data.\n\n#### Comparing IQR and Z-score results\n\nFinally, we compare how many listings are flagged by each method.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncomparison_summary <- outliers_iqr %>%\n  select(id, room_type, outlier_iqr) %>%\n  left_join(\n    outliers_z %>% select(id, outlier_z),\n    by = \"id\"\n  ) %>%\n  count(outlier_iqr, outlier_z)\n\ncomparison_summary\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 x 3\n  outlier_iqr outlier_z     n\n  <lgl>       <lgl>     <int>\n1 FALSE       FALSE     23329\n2 TRUE        FALSE      1863\n3 TRUE        TRUE         56\n4 NA          NA         4803\n```\n\n\n:::\n:::\n\n\n**Interpretation**\n\nThis comparison highlights a key methodological insight:\n\n-   Many listings flagged by the IQR rule are **not flagged** by Z-scores.\n\n-   Listings flagged by Z-scores are almost always flagged by the IQR rule as well.\n\n-   The overlap is asymmetric.\n\nIn other words, the Z-score rule is more conservative and may under-detect outliers when distributions are strongly skewed. This does not make Z-scores “wrong”, but it does limit their usefulness as a primary detection method for price data.\n\nIn practice, Z-score–based flags often differ substantially from IQR-based flags. This difference is not an error—it reflects different assumptions.\n\n-   IQR-based methods rely on ranks and quantiles\n\n-   Z-score–based methods rely on moments (mean and variance)\n\nFor heavily skewed price data, IQR-based detection is usually more reliable, while Z-scores should be interpreted as a **supplementary diagnostic** rather than a primary rule.\n\n## Should Outliers Be Removed?\n\nDetecting outliers does **not** imply that they should be automatically removed. Outlier detection is a diagnostic step, not a cleaning instruction.\n\nIn the context of Airbnb price data, many extreme values correspond to luxury properties, large homes, or special accommodation types. Blindly removing such observations may erase precisely the information that makes the data interesting.\n\nInstead, several alternative strategies should be considered.\n\n### Verify and understand the source of extremeness\n\nThe first question should always be *why* an observation is extreme.\n\n-   Is the listing a luxury property?\n-   Does it belong to a specific `room_type`?\n-   Is it located in a high-demand neighborhood?\n-   Is it associated with unusual booking constraints (e.g., very high `minimum_nights`)?\n\nIn many cases, extreme values are **valid reflections of heterogeneity**, not data errors.\n\n### Use transformations or robust methods\n\nWhen extreme values distort summaries or model estimates, removal is not the only option.\n\nCommon alternatives include:\n\n-   transforming the response variable (e.g., log transformation of prices),\n-   using robust estimators that reduce sensitivity to extremes,\n-   modeling medians or quantiles instead of means.\n\nThese approaches preserve information while reducing the influence of extreme observations.\n\n### Model extremes explicitly when relevant\n\nIn some applications, outliers are not nuisances but the primary object of interest.\n\nExamples include:\n\n-   luxury market analysis,\n-   risk assessment,\n-   rare but high-impact events.\n\nIn such cases, extreme observations should be modeled explicitly rather than suppressed.\n\n### A final perspective\n\nOutliers are not merely statistical inconveniences. They often highlight structural differences, market segmentation, or meaningful departures from typical behavior.\n\nUnderstanding *why* an observation is extreme is frequently more informative than deleting it.\n\nIn practice, thoughtful outlier handling requires a balance between statistical rules, domain knowledge, and modeling objectives.\n\n## Final Remarks\n\nOutlier detection is a natural step in the data preprocessing workflow. It typically follows missing data analysis and precedes scaling, transformation, or model fitting.\n\nIn this article, the focus was not on eliminating extreme values, but on **understanding why they occur**. Through visual exploration, context-aware analysis using `room_type`, and formal detection rules such as the IQR method and Z-scores, we demonstrated that extreme values are not noise by default.\n\nIn many real-world datasets, especially those involving prices or economic behavior, extreme values reflect structural heterogeneity rather than data quality issues. Treating them blindly as errors risks discarding meaningful information.\n\nOutliers should therefore be approached as **questions posed by the data**: Why is this observation extreme? Does it represent a different regime, a rare event, or a distinct subgroup?\n\nAnswering these questions requires a combination of statistical tools, domain knowledge, and clear analytical goals. When handled thoughtfully, outlier analysis enhances both the robustness and the interpretability of downstream models.\n\n## References and Further Reading\n\n-   Tukey, J. W. (1977). *Exploratory Data Analysis*. Addison-Wesley.\\\n    (Foundational reference for boxplots, IQR, and exploratory thinking.)\n\n-   Hastie, T., Tibshirani, R., Friedman, J. (2009). *The Elements of Statistical Learning*. Springer.\\\n    (Statistical foundations and the role of robust methods in modeling.)\n\n-   James, G., Witten, D., Hastie, T., Tibshirani, R. (2021). *An Introduction to Statistical Learning*. Springer.\\\n    (Accessible discussion of preprocessing, transformations, and practical modeling considerations.)\n\n-   NIST/SEMATECH e-Handbook of Statistical Methods – Outliers\\\n    <https://www.itl.nist.gov/div898/handbook/eda/section3/eda35h.htm>\\\n    (Authoritative overview of outlier concepts and detection methods.)\n\n-   Wickham, H., Grolemund, G. (2017). *R for Data Science*. O’Reilly Media.\\\n    (Practical guidance on data exploration, visualization, and preprocessing workflows in R.)\n\n-   Inside Airbnb – Get the Data\\\n    <https://insideairbnb.com/get-the-data/>\\\n    (Data source used in this article; city-level Airbnb listings data.)\n\n-   Wickham, H. (2016). *ggplot2: Elegant Graphics for Data Analysis*. Springer.\\\n    (Principles of layered graphics and effective visualization used throughout the article.)\n",
    "supporting": [
      "index_files\\figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}